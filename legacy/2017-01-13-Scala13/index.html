<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        Scala学习整理[第二十二-二十三章 List和For循环][Programming In Scala] - undefined
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i>  </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/assets/avatar.jpeg" />
        </div>
        <div class="name">
            <i>Anddd7</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#第二十二章-List的实现"><span class="toc-text">第二十二章 List的实现</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#第二十三章"><span class="toc-text">第二十三章</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i>  </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        Scala学习整理[第二十二-二十三章 List和For循环][Programming In Scala]
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2018-01-06 21:20:16</span></span>
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <h2 id="第二十二章-List的实现"><a href="#第二十二章-List的实现" class="headerlink" title="第二十二章 List的实现"></a>第二十二章 List的实现</h2><pre><code>/**
  * List的实现
  * 默认List -&gt; scala.collection.immutable.List
  *
  * 本章解析了List的源码 ,在源码的内部使用了var while 循环 ,而非全部的val 递归
  * 因为循环的效率是大于等于递归的
  * scala的&quot;函数化&quot;编程其实是  &#39;通过合理的封装,使得开发流程是函数化的&#39; ,这样会使得业务代码非常清晰
  *
  * 而外部(相对于List等工具类的源码来说)使用val
  * 提高重复使用率(指向内存堆中同一个数据结构)的同时 ,保证数据不会轻易改变(共享状态下会影响多处)
  * &quot;设计者同样希望维持纯粹.不可变的数据结构 ;也都希望能够高效.渐进式的构造这个数据结构&quot;
  */
</code></pre><h2 id="第二十三章"><a href="#第二十三章" class="headerlink" title="第二十三章"></a>第二十三章</h2><pre><code>package SecondWithProgrammingInScala

/**
  * 重访For表达式
  */

case class Person(name: String, isMale: Boolean, children: Person*)

object ForApplication {

  val lara = Person(&quot;Lara&quot;, false)
  val bob = Person(&quot;Bob&quot;, true)
  val julie = Person(&quot;Julie&quot;, false, lara, bob)
  val persons = List(lara, bob, julie)

  def main(args: Array[String]): Unit = {
    /**
      * map方法 : 对每一个子元素执行方法 ,并将返回值记录生成一个Seq(some) ,最后返回一个大的Seq( Seq(some1)...Seq(somen) )
      * flatMap方法 : 类似map ,将返回值记录到同一个Seq(some) ,最后返回Seq(some1...somen)
      */

    //List的高阶函数
    persons
      .filter(p =&gt; !p.isMale)
      .flatMap(p =&gt; (
        p.children.map(c =&gt; (p.name, c.name))
        )
      )

    /**
      * scala的for循环有着更多的结构和功能 ,可以完成递归/查询/过滤等操作
      * p &amp;lt;- persons 生成式
      * if !p.isMale 过滤式
      * name = p.name 定义式
      * yield 保留字
      *
      */

    //for循环
    for (p &amp;lt;- persons if !p.isMale;
         c &amp;lt;- p.children)
      yield (p.name, c.name)
  }

  /**
    * 在一些时候 ,我们提倡多使用List的高阶函数 ,map/filter等 ,他们看起来更直观
    * 但面对一些复杂操作时 ,他们的使用关系也可能变得复杂 ,并不利于阅读
    * 例如 : 找出所有母子的姓名对
    *
    * 这时候就可以使用for-if-yield方法
    * 实质上 ,scala会把
    * 带有yield的编译成filter/flatMap/map方法组合
    * 不带yield的编译成filter/foreach方法组合
    *
    * 转义生成器
    * for(x&amp;lt;-expr1) yield expr2
    *         expr1.map(x=&gt;expr2)
    *
    * 转义过滤
    * for(x&amp;lt;-expr1 if expr2) yield expr3
    *         for(x&amp;lt;-expr1 filter(x=&gt;expr2)) yield expr3
    *         expr1 filter(x=&gt;expr2) map(x=&gt;expr3)
    *
    * 转义两个生成器
    * for(x&amp;lt;-expr1 ;y&amp;lt;-expr2) yield expr3
    *         expr1 flatMap( x=&gt; for(x&amp;lt;-expr2) yield expr3 )
    *         expr1 flatMap( x=&gt; expr2.map(x=&gt;expr3) )
    *
    * 转义生成器中的模式
    * for((x,y) &amp;lt;- expr1 ) yield expr2
    *         expr1 map( case (x,y) =&gt; expr2)
    *
    * for(&quot;pat&quot; &amp;lt;- expr1 ) yield expr2
    *         expr1 filter(
    *           case &quot;pat&quot; =&gt; true
    *           case _ =&gt; false
    *         ) map( case (x,y) =&gt; expr2)
    *
    * 转义定义
    * for(x&amp;lt;-expr1 ; y=expr2) yield expr3
    *         for( (x,y)&amp;lt;-  for(x&amp;lt;-expr1) yield (x,expr2)) yield expr3
    *
    * 转义循环
    * for(x&amp;lt;-expr1) body
    *   expr1 foreach (x =&gt; body)
    */
}
</code></pre>
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span> PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span> UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = ""
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>

<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Anddd7"><title>SpringBoot学习-第一章 新的Spring基础-[Spring Boot 实战] · Anddd7's Planet</title><meta name="description" content="Spring Boot学习，熟悉注解和Java式的配置。源代码见Source-Sample-GitHub。
Spring配置方式
配置文件xml（Spring 1.x） 》》 
注解@annotation（Spring 2.x+Jdk1.5）》》
Java配置（Spring 3/4）

Spring"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.png" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/assets/avatar.jpeg" style="width:127px;"><h3 title=""><a href="/">Anddd7's Planet</a></h3><div class="description"><p>Level Up! Programmer~</p></div></div></div><ul class="social-links"><li><a href="http://github.com/Anddd7"><i class="fa fa-github"></i></a></li></ul><div class="footer"><a target="_blank" href="/"><span>Nice Theme of </span></a><a href="https://github.com/Ben02/hexo-theme-Anatole">Anatole</a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li><li><a href="/about">关于</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/assets/avatar.jpeg"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>SpringBoot学习-第一章 新的Spring基础-[Spring Boot 实战]</a></h3></div><div class="post-content"><blockquote>
</blockquote>
<p>Spring Boot学习，熟悉注解和Java式的配置。源代码见<a href="https://github.com/Anddd7/SSM-SpringBoot-Starter" target="_blank" rel="noopener">Source-Sample-GitHub</a>。</p>
<h2 id="Spring配置方式"><a href="#Spring配置方式" class="headerlink" title="Spring配置方式"></a>Spring配置方式</h2><ul>
<li>配置文件<code>xml</code>（Spring 1.x） 》》 </li>
<li>注解<code>@annotation</code>（Spring 2.x+Jdk1.5）》》</li>
<li>Java配置（Spring 3/4）</li>
</ul>
<p><strong><code>SpringBoot</code>就是基于Java配置（注解的应用）</strong></p>
<h2 id="Spring组件"><a href="#Spring组件" class="headerlink" title="Spring组件"></a>Spring组件</h2><p><li>核心组件（Core） <br></li></p>
<p><ul>- -Core：核心工具类，Spring其他模块的主要依赖</ul></p>
<ul>
<li>-Bean：对<code>bean</code>的支持</li>
<li>-Context：运行时容器</li>
<li>-Context-Support：容器对第三方包的集成支持</li>
<li>-Expression：使用表达式语言查询操作运行时的对象- -AOP：基于代理的AOP支持</li>
<li>-Aspects：基于AspectJ的AOP支持- -Messaging：对消息架构和协议的支持- -Web：基础的集成功能，为Web项目提供Spring容器</li>
<li>-Webmvc：基于Servlet的Spring MVC</li>
<li>-WebSocket：提供WebSocket功能</li>
<li>-Webmvc-Portlet：支持Portlet环境- -JDBC：以JDBC方式访问数据库</li>
<li>-TX：事务支持</li>
<li>-ORM：对象关系映射支持</li>
<li>-OXM：对象xml映射支持</li>
<li><p>-JMS：对JMS的支持</p>
<h2 id="Spring生态圈（独立项目）"><a href="#Spring生态圈（独立项目）" class="headerlink" title="Spring生态圈（独立项目）"></a>Spring生态圈（独立项目）</h2></li>
<li><p>-Boot：使用默认配置快速开发</p>
</li>
<li>-XD：简化大数据应用开发</li>
<li>-Cloud：分布式系统开发工具集</li>
<li>-Data：对主流关系型/NoSql数据库的支持</li>
<li>-Integration：通过消息机制对企业集成模式的支持</li>
<li>-Batch：简化优化大数据批处理</li>
<li>-Security：认证授权</li>
<li>-Social：与社交网络API的继承</li>
<li>-Mobile：对手机设备的识别</li>
<li>-Web Services：基于协议有限的SOAP/Web服务</li>
<li>-Session：提供API管理用户会话</li>
<li>…</li>
</ul>
<h2 id="Spring原则"><a href="#Spring原则" class="headerlink" title="Spring原则"></a>Spring原则</h2><ul>
<li>使用POJO进行轻量级和最小侵入式开发</li>
<li>通过依赖注入和基于接口编程降低耦合</li>
<li>通过AOP和默认习惯进行声明式编程</li>
<li>使用AOP和模板减少模式化（重复的）代码</li>
</ul>
<h2 id="依赖注入-（IOC-DI）"><a href="#依赖注入-（IOC-DI）" class="headerlink" title="依赖注入 （IOC+DI）"></a>依赖注入 （IOC+DI）</h2><p>即由Spring容器创建管理Bean（POJO类），通过注解/XML/JAVA告诉容器应该将Bean何时放在何地。</p>
<p>声明Bean： <br></p>
<ul>
<li>@Component 通用 <br></li>
<li>@Service 在业务逻辑层使用 <br></li>
<li>@Repository 数据访问层使用 <br></li>
<li>@Controller 展现层使用</li>
</ul>
<p>引入Bean： <br></p>
<ul>
<li>@Autowired Spring提供的注解 <br></li>
<li>@Inject/@Resource JSR-330/JSR-250提供的注解</li>
</ul>
<h2 id="JAVA配置"><a href="#JAVA配置" class="headerlink" title="JAVA配置"></a>JAVA配置</h2><p>@Configuration 表示这个类是一个配置类，等效于一个xml文件 <br><br>@Bean 注解一个方法，将方法返回值注册为一个bean</p>
<ul>
<li>配置注解化</li>
</ul>
<figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;<span class="keyword">context</span>:<span class="keyword">component</span>-scan base-<span class="keyword">package</span>=<span class="string">"com.controller"</span>&gt;&lt;/<span class="keyword">context</span>:<span class="keyword">component</span>-scan&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">@<span class="keyword">ComponentScan</span>("<span class="keyword">com</span>.<span class="keyword">controller</span>")</span><br></pre></td></tr></table></figure>
<ul>
<li>配置Java化</li>
</ul>
<figure class="highlight cs"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;bean <span class="keyword">class</span>=<span class="string">"com.util.MySwaggerConfig"</span>/&gt;</span><br></pre></td></tr></table></figure>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">JavaConfig</span></span>&#123;</span><br><span class="line">    <span class="meta">@Bean</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> MySwaggerConfig <span class="title">mySwaggerConfig</span><span class="params">()</span></span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">new</span> MySwaggerConfig();</span><br><span class="line">    &#125; </span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="使用Aspectj实现AOP"><a href="#使用Aspectj实现AOP" class="headerlink" title="使用Aspectj实现AOP"></a>使用Aspectj实现AOP</h2><p>有两种方式，一个是监听方法（通过配置目标路径），一个是监听注解（在目标方法上放置特殊注解） <br></p>
<ul>
<li>定义注解，作为被监听的标识</li>
</ul>
<figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 注解本身是没有作用的，只是作为一个规则，关联拦截者和被拦截者</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="variable">@Target</span>(ElementType.METHOD)<span class="comment">//用于方法</span></span><br><span class="line"><span class="variable">@Retention</span>(RetentionPolicy.RUNTIME)<span class="comment">//可用于运行时</span></span><br><span class="line"><span class="variable">@Documented</span></span><br><span class="line">public <span class="variable">@interface</span> AopAction &#123;</span><br><span class="line">    <span class="selector-tag">String</span> <span class="selector-tag">name</span>();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>书写被拦截的Service(注解式拦截，需要注解Service的方法)</li>
</ul>
<figure class="highlight kotlin"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 注解式拦截，在对应方法上加上<span class="doctag">@AopAction</span>，在拦截时通过检查注解进行拦截</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoAnnotationAopService</span> </span>&#123;</span><br><span class="line">    <span class="meta">@AopAction(name = <span class="meta-string">"注解式AOP"</span>)</span></span><br><span class="line">    <span class="keyword">public</span> String say() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello,Annotation World."</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DemoMethodAopService</span> </span>&#123;</span><br><span class="line">    <span class="keyword">public</span> String say() &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="string">"Hello, Normal World."</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<ul>
<li>定义拦截器实现，定义拦截的对象和处理方法</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * Aop实现的地方</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@Aspect</span><span class="comment">//声明一个切面</span></span><br><span class="line"><span class="meta">@Component</span><span class="comment">//托管给Spring容器</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">AspectAopImpl</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> Logger log = LoggerFactory.getLogger(<span class="keyword">this</span>.getClass());</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 注解式，通过检查注解位置来拦截</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"@annotation(demo.springboot.aop.impl.AopAction)"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">annotationPointCut</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Before</span>(<span class="string">"annotationPointCut()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logBefore</span><span class="params">()</span> </span>&#123; log.info(<span class="string">"logBefore:现在时间是:"</span> + <span class="keyword">new</span> Date()); &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 通过指定拦截位置和具体方法</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Pointcut</span>(<span class="string">"execution(* demo.springboot.aop.service.DemoMethodAopService.*(..))"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">private</span> <span class="keyword">void</span> <span class="title">methodPointCut</span><span class="params">()</span> </span>&#123;&#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@After</span>(<span class="string">"methodPointCut()"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">logAfter</span><span class="params">()</span> </span>&#123; log.info(<span class="string">"logAfter:现在时间是:"</span> + <span class="keyword">new</span> Date()); &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h2 id="启用AOP"><a href="#启用AOP" class="headerlink" title="启用AOP"></a>启用AOP</h2><p>注入配置文件，开启AspectJ</p>
<figure class="highlight d"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">* 用注解代替了xml</span></span><br><span class="line"><span class="comment">* &lt;aop:aspectj-autoproxy proxy-target-class="true"/&gt;</span></span><br><span class="line"><span class="comment">*/</span></span><br><span class="line"><span class="keyword">@EnableAspectJAutoProxy</span></span><br><span class="line"><span class="keyword">@Configuration</span></span><br><span class="line"><span class="keyword">@ComponentScan</span>(<span class="string">"demo.springboot.aop"</span>)<span class="comment">//在Application入口整体扫描，可省略此行</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> AopConfiguration &#123;</span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">static</span> <span class="keyword">void</span> main(String[] args) &#123;</span><br><span class="line">        AnnotationConfigApplicationContext context = <span class="keyword">new</span> AnnotationConfigApplicationContext(AopConfig.<span class="keyword">class</span>);</span><br><span class="line">         <span class="comment">/**</span></span><br><span class="line"><span class="comment">         * 测试两种Aop</span></span><br><span class="line"><span class="comment">         */</span></span><br><span class="line">         DemoAnnotationAopService annotationAopService = context.getBean(DemoAnnotationAopService.<span class="keyword">class</span>);</span><br><span class="line">        DemoMethodAopService methodAopService = context.getBean(DemoMethodAopService.<span class="keyword">class</span>);</span><br><span class="line"></span><br><span class="line">        System.<span class="keyword">out</span>.println(annotationAopService.say());</span><br><span class="line">        System.<span class="keyword">out</span>.println(methodAopService.say());</span><br><span class="line">        context.close();</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2017-02-14</span><i class="fa fa-tag"></i></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,https://anddd7.github.io/legacy/SpringBoot1/,Anddd7's Planet,SpringBoot学习-第一章 新的Spring基础-[Spring Boot 实战],;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/legacy/SpringBoot2/" title="SpringBoot学习-第二章 常用配置方式-[Spring Boot 实战]">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/legacy/Maven-POM/" title="Maven-详解pom.xml内容及用法">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>
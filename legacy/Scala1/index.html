<!DOCTYPE html><html lang="zh-CN"><head><meta charset="utf-8"><meta name="X-UA-Compatible" content="IE=edge"><meta name="author" content="Anddd7"><title>Scala学习整理[第一章 可伸缩的语言][Programming In Scala] · Anddd7's Planet</title><meta name="description" content="##回顾之前通过实验楼的课程已经对scala语言有了初步的了解 ,做了一些运算/重载/函数式编程的小Demo .但是不少细节还是模糊的 ,刚好看到 Programming In Scala 这本书 ,是scala作者写的指导书 .原版实在是有难度 ,所以决定先看中文 .
开展计划就是跟着书的章节进行"><meta name="keywords"><meta content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0" name="viewport"><meta content="yes" name="apple-mobile-web-app-capable"><meta content="black" name="apple-mobile-web-app-status-bar-style"><meta content="telephone=no" name="format-detection"><meta name="renderer" content="webkit"><link rel="short icon" href="/images/favicon.jpg" type="image/x-icon"><link rel="stylesheet" href="/css/style.css"><link rel="stylesheet" href="/css/blog_basic.css"><link rel="stylesheet" href="/css/font-awesome.min.css"><link rel="stylesheet" href="/css/foundation-icons.css"><link rel="alternate" type="application/atom+xml" title="ATOM 1.0" href="/atom.xml"></head><body><div class="sidebar animated fadeInDown"><div class="logo-title"><div class="title"><img src="/assets/avatar.jpeg" style="width:127px;"><h3 title=""><a href="/">Anddd7's Planet</a></h3><div class="description"><p>Level Up! Programmer~</p></div></div></div><ul class="social-links"><li><a href="http://github.com/Anddd7"><i class="fa fa-github"></i></a></li><li><a href="mailto:liaoad_space@sina.com"><i class="fi-mail"></i></a></li></ul><div class="footer"><span>Theme based on </span><a href="https://github.com/Ben02/hexo-theme-Anatole"> <strong>Anatole</strong></a><div class="by_farbox"><a href="https://hexo.io/zh-cn/" target="_blank">Proudly published with Hexo&#65281;</a></div></div></div><div class="main"><div class="page-top animated fadeInDown"><div class="nav"><li><a href="/">首页</a></li><li><a href="/archives">归档</a></li><li><a href="/about">关于</a></li></div><div class="information"><div class="back_btn"><li><a class="fa fa-chevron-left" onclick="window.history.go(-1)"> </a></li></div><div class="avatar"><img src="/assets/avatar.jpeg"></div></div></div><div class="autopagerize_page_element"><div class="content"><div class="post-page"><div class="post animated fadeInDown"><div class="post-title"><h3><a>Scala学习整理[第一章 可伸缩的语言][Programming In Scala]</a></h3></div><div class="post-content"><p>##回顾<br>之前通过实验楼的课程已经对scala语言有了初步的了解 ,做了一些运算/重载/函数式编程的小Demo .但是不少细节还是模糊的 ,刚好看到 <strong>Programming In Scala</strong> 这本书 ,是scala作者写的指导书 .原版实在是有难度 ,所以决定先看中文 .</p>
<h2 id="开展"><a href="#开展" class="headerlink" title="开展"></a>开展</h2><p>计划就是跟着书的章节进行学习 ,结合之前的思考 ,细化理解 .为了方便书写运行代码(多写才是硬道理) ,所以就直接在Intellij里面写了个工程 ,理解写成注释 ,代码直接运行 .</p>
<blockquote>
<p>博客内可能看着比较别扭 ,有兴趣的可以下载工程查看<a href="https://github.com/Anddd7/FirstStep4Scala" target="_blank" rel="noopener">GitHub</a></p>
</blockquote>
<h2 id="第一章-Scala的概况和历史"><a href="#第一章-Scala的概况和历史" class="headerlink" title="第一章 Scala的概况和历史"></a>第一章 Scala的概况和历史</h2><figure class="highlight scala"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">package</span> <span class="type">SecondWithProgrammingInScala</span>.<span class="type">Chapter1</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Scala名称来自于scalable(可伸缩的) language ,它的设计目的就是为了方便使用者的扩展(如自己构造的if()&#123;&#125;的语法糖函数)</span></span><br><span class="line"><span class="comment">  * Scala运行在JVM上 ,可以与Java无缝连接(编译后都是class码) ,也可以作为脚本使用(还有命令行解释器)</span></span><br><span class="line"><span class="comment">  * Scala = JS (弱类型) + Java(面向对象) + C(函数式编程)</span></span><br><span class="line"><span class="comment">  * 每一门语言有着他的特性和优缺点 ,有着局限性和适用性</span></span><br><span class="line"><span class="comment">  * Scala给你多种特性去自由选择 ,需要对象就class ,需要函数就用函数特性</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * Scala属于高级语言 ,每一句代码都具有很强的目的性 ,不使用分号和类型注释 ,显得干净准确</span></span><br><span class="line"><span class="comment">  * "关联映射"?</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Part1</span> </span>&#123;</span><br><span class="line">  <span class="keyword">var</span> capital = <span class="type">Map</span>(<span class="string">"US"</span> -&gt; <span class="string">"Washington"</span>, <span class="string">"France"</span> -&gt; <span class="string">"Paris"</span>)</span><br><span class="line">  capital += (<span class="string">"Japan"</span> -&gt; <span class="string">"Tokyo"</span>)</span><br><span class="line">  println(capital)</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * Scala可以让使用者进行扩展和修改 ,可以从语言层面上进行修改</span></span><br><span class="line"><span class="comment">    * 例如BigInt不属于原生类型(Int/Char/Boolean等) 但是也可以像内建类型一样使用+/-等算数方法和整数进行计算</span></span><br><span class="line"><span class="comment">    * 如果换成Java里面的类型就不那么自由了</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">factorial</span></span>(x: <span class="type">BigInt</span>): <span class="type">BigInt</span> =</span><br><span class="line">  <span class="keyword">if</span> (x == <span class="number">0</span>) <span class="number">1</span> <span class="keyword">else</span> x * factorial(x - <span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 使用Java里面定义的大整型 ,相比之下因为函数名和语法的限制 ,运算显得很臃肿</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line"></span><br><span class="line">  <span class="keyword">import</span> java.math.<span class="type">BigInteger</span></span><br><span class="line"></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">factorial</span></span>(x: <span class="type">BigInteger</span>): <span class="type">BigInteger</span> =</span><br><span class="line">    <span class="keyword">if</span> (x == <span class="type">BigInteger</span>.<span class="type">ZERO</span>) <span class="type">BigInteger</span>.<span class="type">ONE</span></span><br><span class="line">    <span class="keyword">else</span> x.multiply(factorial(x.subtract(<span class="type">BigInteger</span>.<span class="type">ONE</span>)))</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 可变的控制结构 ,书中的scala actor已经废弃 ,因此用另一个例子说明</span></span><br><span class="line"><span class="comment">    * 可以看到 ,我自己书写了一个if2 ,他使用起来和内置的if几乎一样(只作为控制结构变换展示)</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">if2</span></span>(assertion: =&gt; <span class="type">Boolean</span>)(method: =&gt; <span class="type">Any</span>) &#123;</span><br><span class="line">    <span class="keyword">if</span> (assertion) method <span class="comment">//如果判断条件成立 则执行条件体内的方法</span></span><br><span class="line">    <span class="keyword">else</span> println(<span class="string">"不成立"</span>)</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  if2(<span class="number">1</span> == <span class="number">2</span>) &#123;</span><br><span class="line">    println(<span class="string">"成立"</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * scala是面向对象的</span></span><br><span class="line"><span class="comment">  * 它包含class/object ,也有着trait/abstract的设计 ,也有private/protect的访问限制</span></span><br><span class="line"><span class="comment">  * 调用方法也是可以通过 class.xxx 调用类和对象的方法 ,只是语法上做了简化</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Part2</span> </span>&#123;</span><br><span class="line">  <span class="comment">//弱类型 自动判断</span></span><br><span class="line">  <span class="keyword">val</span> one = <span class="number">1</span></span><br><span class="line">  <span class="comment">//强类型 指定</span></span><br><span class="line">  <span class="keyword">val</span> two: <span class="type">Int</span> = <span class="number">2</span></span><br><span class="line">  <span class="comment">//直接使用 + 函数</span></span><br><span class="line">  <span class="keyword">val</span> three = one + two</span><br><span class="line">  <span class="comment">//实际是调用的 Int.+ 函数</span></span><br><span class="line">  <span class="keyword">val</span> four = three.+(<span class="number">1</span>)</span><br><span class="line"></span><br><span class="line">  <span class="comment">/**</span></span><br><span class="line"><span class="comment">    * scala是函数式的</span></span><br><span class="line"><span class="comment">    * 函数是头等值 ,与整数字符串同等地位 ,函数可以作为参数传递 ,可以在函数中做在其他地方能做的任何事</span></span><br><span class="line"><span class="comment">    * 程序的输入值应该映射成输出值 ,而不是加以修改(返回new) ,鼓励使用不可变数据结构 ,方法透明(用方法的返回替代输出值)</span></span><br><span class="line"><span class="comment">    *</span></span><br><span class="line"><span class="comment">    * 从很多设计可以看出 ,作者是想要大家使用函数式的代码方式 ,减少var的使用 ,ifelse携带返回</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 兼容 :Java交互 .底层JVM .</span></span><br><span class="line"><span class="comment">  * 简洁 :能省则省 ,还可以改变函数控制结构去省(交给编译器解释 ,编译的时间会更长)</span></span><br><span class="line"><span class="comment">  * 高层抽象 :使用更具体的函数foreach(e=&gt;&#123;&#125;) 或是 _ 函数字面量 ,可以省略很多代码</span></span><br><span class="line"><span class="comment">  * 高级的静态类型化 :静态类型可以避免布尔型不会与整数型相加;增加类型推断/隐式转换减少定义强类型的情况</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Part3</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">  <span class="comment">/*这是一个Java类</span></span><br><span class="line"><span class="comment">  class Message &#123;</span></span><br><span class="line"><span class="comment">    private String msg;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public Message (String msg) &#123;</span></span><br><span class="line"><span class="comment">      this.msg = msg;</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment"></span></span><br><span class="line"><span class="comment">    public boolean hasUpperCase() &#123;</span></span><br><span class="line"><span class="comment">      boolean result = false;</span></span><br><span class="line"><span class="comment">      for (int i = 0;i &amp;lt; msg.length;i ++)&#123;</span></span><br><span class="line"><span class="comment">        if (Character.isUpperCase(name.charAt(i))) &#123;</span></span><br><span class="line"><span class="comment">          result = true;</span></span><br><span class="line"><span class="comment">          break</span></span><br><span class="line"><span class="comment">        &#125;</span></span><br><span class="line"><span class="comment">      &#125;</span></span><br><span class="line"><span class="comment">      return result</span></span><br><span class="line"><span class="comment">    &#125;</span></span><br><span class="line"><span class="comment">  &#125;</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line">  <span class="comment">//上面的java代码使用scala</span></span><br><span class="line">  <span class="class"><span class="keyword">class</span> <span class="title">Message</span>(<span class="params">msg: <span class="type">String</span></span>) </span>&#123;</span><br><span class="line">    <span class="function"><span class="keyword">def</span> <span class="title">hasUpperCase</span></span>: <span class="type">Boolean</span> = &#123;</span><br><span class="line">      msg.exists(_.isUpper)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="comment">//弱类型 隐式转换</span></span><br><span class="line">  <span class="keyword">val</span> i = 'i'</span><br><span class="line">  <span class="keyword">val</span> i1 = i + <span class="number">1</span></span><br><span class="line"></span><br><span class="line">  println(i1)</span><br><span class="line">  <span class="comment">//隐藏的类型规则 会及时提醒错误</span></span><br><span class="line">  <span class="comment">//val i2: Char = i + 2</span></span><br><span class="line">  <span class="comment">//val T = true + 1</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//除去重复的定义</span></span><br><span class="line">  <span class="keyword">import</span> scala.collection.immutable.<span class="type">HashMap</span></span><br><span class="line"></span><br><span class="line">  <span class="comment">//val x: HashMap[Int, String] = new HashMap[Int, String]</span></span><br><span class="line">  <span class="keyword">val</span> y: <span class="type">HashMap</span>[<span class="type">Int</span>, <span class="type">String</span>] = <span class="keyword">new</span> <span class="type">HashMap</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * scala的特点就是集众家之长</span></span><br><span class="line"><span class="comment">  * 语法上主要借助Java和C#(他们的句法来自于C/C++) ,</span></span><br><span class="line"><span class="comment">  * 和Java一样的 表达式/句子/代码块 ,类/包/引用 ,基本类型/类库 ,和执行模式(.class-&gt;JVM)</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * 统一对象模型来自Smalltalk(也影响了Ruby)</span></span><br><span class="line"><span class="comment">  * 通用嵌套思想 ,类/函数/变量都能互相嵌套 ,出现在Algol/Simula</span></span><br><span class="line"><span class="comment">  * 方法调用和字段选择的统一访问原则来自Eiffel</span></span><br><span class="line"><span class="comment">  * 函数式编程的处理方式则以SML/OCaml/F#为代表的ML系列语言相近 ,一些高阶函数也出现在ML和Haskell中</span></span><br><span class="line"><span class="comment">  * 隐式参数来自Haskell的类型类</span></span><br><span class="line"><span class="comment">  * 基于actor的并发库(akka.actor)来自于Erlang的思想</span></span><br><span class="line"><span class="comment">  *</span></span><br><span class="line"><span class="comment">  * Iswim/Smalltalk -&gt; 把前缀操作符视为函数 1.+(1) ;允许函数字面量(或代码块)作为参数 ,从而定义控制结构</span></span><br><span class="line"><span class="comment">  * C++ -&gt; 重载操作符 ;模板</span></span><br><span class="line"><span class="comment">  * 多种函数式语言中也引入了对象</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Part4</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">  * 多多练习</span></span><br><span class="line"><span class="comment">  * Java-&gt;Scala 需要更多了了解他的类型系统和函数式编程思想</span></span><br><span class="line"><span class="comment">  */</span></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Part5</span> </span>&#123;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">object</span> <span class="title">Chapter1App</span> </span>&#123;</span><br><span class="line">  <span class="function"><span class="keyword">def</span> <span class="title">main</span></span>(args: <span class="type">Array</span>[<span class="type">String</span>]): <span class="type">Unit</span> = &#123;</span><br><span class="line">    <span class="comment">//Part1</span></span><br><span class="line">    <span class="type">Part3</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></div><div class="post-footer"><div class="meta"><div class="info"><i class="fa fa-sun-o"></i><span class="date">2016-12-28</span><i class="fa fa-tag"></i></div></div></div></div><div class="share"><div class="evernote"><a class="fa fa-bookmark" href="javascript:(function(){EN_CLIP_HOST='http://www.evernote.com';try{var%20x=document.createElement('SCRIPT');x.type='text/javascript';x.src=EN_CLIP_HOST+'/public/bookmarkClipper.js?'+(new%20Date().getTime()/100000);document.getElementsByTagName('head')[0].appendChild(x);}catch(e){location.href=EN_CLIP_HOST+'/clip.action?url='+encodeURIComponent(location.href)+'&amp;title='+encodeURIComponent(document.title);}})();" ref="nofollow" target="_blank"></a></div><div class="weibo"><a class="fa fa-weibo" href="javascript:void((function(s,d,e){try{}catch(e){}var f='http://service.weibo.com/share/share.php?',u=d.location.href,p=['url=',e(u),'&amp;title=',e(d.title),'&amp;appkey=2924220432'].join('');function a(){if(!window.open([f,p].join(''),'mb',['toolbar=0,status=0,resizable=1,width=620,height=450,left=',(s.width-620)/2,',top=',(s.height-450)/2].join('')))u.href=[f,p].join('');};if(/Firefox/.test(navigator.userAgent)){setTimeout(a,0)}else{a()}})(screen,document,encodeURIComponent));"></a></div><div class="twitter"><a class="fa fa-twitter" href="http://twitter.com/home?status=,https://anddd7.github.io/legacy/Scala1/,Anddd7's Planet,Scala学习整理[第一章 可伸缩的语言][Programming In Scala],;"></a></div></div><div class="pagination"><ul class="clearfix"><li class="pre pagbuttons"><a class="btn" role="navigation" href="/legacy/Scala4/" title="Scala学习整理[第四-六章 使用Scala运行类+对象][Programming In Scala]">上一篇</a></li><li class="next pagbuttons"><a class="btn" role="navigation" href="/legacy/Scala2/" title="Scala学习整理[第二章 入门Ⅰ][Programming In Scala]">下一篇</a></li></ul></div></div></div></div></div><script src="/js/jquery.js"></script><script src="/js/jquery-migrate-1.2.1.min.js"></script><script src="/js/jquery.appear.js"></script></body></html>
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="google-site-verification" content="xBT4GhYoi5qRD5tr338pgPM5OWHHIDR6mNg1a3euekI" />
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="keyword"  content="">
    <link rel="shortcut icon" href="/img/favicon.ico">

    <title>
        
        Scala学习整理[第十章 继承重载应用][Programming In Scala] - undefined
        
    </title>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="/css/aircloud.css">
    <link rel="stylesheet" href="/css/gitment.css">
    <!--<link rel="stylesheet" href="https://imsun.github.io/gitment/style/default.css">-->
    <link href="//at.alicdn.com/t/font_620856_pl6z7sid89qkt9.css" rel="stylesheet" type="text/css">
    <!-- ga & ba script hoook -->
    <script></script>
</head>

<body>

<div class="site-nav-toggle" id="site-nav-toggle">
    <button>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
        <span class="btn-bar"></span>
    </button>
</div>

<div class="index-about">
    <i>  </i>
</div>

<div class="index-container">
    
    <div class="index-left">
        
<div class="nav" id="nav">
    <div class="avatar-name">
        <div class="avatar">
            <img src="/assets/avatar.jpeg" />
        </div>
        <div class="name">
            <i>Anddd7</i>
        </div>
    </div>
    <div class="contents" id="nav-content">
        <ul>
            <li >
                <a href="/">
                    <i class="iconfont icon-shouye1"></i>
                    <span>主页</span>
                </a>
            </li>
            <li >
                <a href="/tags">
                    <i class="iconfont icon-biaoqian1"></i>
                    <span>标签</span>
                </a>
            </li>
            <li >
                <a href="/archives">
                    <i class="iconfont icon-guidang2"></i>
                    <span>存档</span>
                </a>
            </li>
            <li >
                <a href="/about/">
                    <i class="iconfont icon-guanyu2"></i>
                    <span>关于</span>
                </a>
            </li>
            
        </ul>
    </div>
    
        <div id="toc" class="toc-article">
    <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#第十章-组合与继承"><span class="toc-text">第十章 组合与继承</span></a></li></ol>
</div>
    
</div>


<div class="search-field" id="search-field">
    <div class="search-container">
        <div class="search-input">
            <span id="esc-search"> <i class="icon-fanhui iconfont"></i></span>
            <input id="search-input"/>
            <span id="begin-search">搜索</span>
        </div>
        <div class="search-result-container" id="search-result-container">

        </div>
    </div>
</div>
        <div class="index-about-mobile">
            <i>  </i>
        </div>
    </div>
    
    <div class="index-middle">
        <!-- Main Content -->
        


<div class="post-container">
    <div class="post-title">
        Scala学习整理[第十章 继承重载应用][Programming In Scala]
    </div>

    <div class="post-meta">
        <span class="attr">发布于：<span>2018-01-06 21:20:16</span></span>
        
        </span>
        <span class="attr">访问：<span id="busuanzi_value_page_pv"></span>
</span>
</span>
    </div>
    <div class="post-content ">
        <h2 id="第十章-组合与继承"><a href="#第十章-组合与继承" class="headerlink" title="第十章 组合与继承"></a>第十章 组合与继承</h2><blockquote>
</blockquote>
<p>本章用图形库的例子 ,展示scala的组合/继承能力 ,以及如何重载成员函数 ,如何利用多态等 .</p>
<pre><code>package SecondWithProgrammingInScala

import scala.collection.mutable.ArrayBuffer

/**
  * 隐含
  * import java.lang._   //everything in the java.lang package
  * import scala._       //everything in the scala package
  * import Predef._      //everything in the Predef object
  *
  * scala类的属性通常也定义为函数(一等公民)
  * 通常是无参函数 只是读取对象的状态
  * 这也是为了减少var的使用 将函数作为值进行传递
  * 每一次获取类的属性 其实就是调用函数并返回新的属性(当前状态的属性)
  *
  * 本章主要用2个打印图像的例子 ,来展示scala的继承重载和函数的应用
  */
abstract class Element {
  //定义的无具体实现的函数 需要子类去实现
  def contents: Array[String]

  //val 和 无参函数 等价
  //但val会稍快一点 val只加载一次 函数调用会有多次
  //但val后续无法修改 无参函数可以重载

  //val height = contents.length
  //val width = if (height == 0) 0 else contents(0).length

  def height: Int = contents.length

  def width: Int


  def show: Unit = contents.foreach(println)

  //引入静态方法
  import ElementFactory.elem

  //如果欲连接的elem比当前elem宽 则扩展当前elem ,左右加上都是&#39; &#39;的elem
  def widen(w: Int): Element = {
    if (w &amp;lt;= width) this
    else {
      val left = elem(&#39; &#39;, (w - width) / 2, height)
      val right = elem(&#39; &#39;, w - width - left.width, height)
      left beside this beside right
    }
  }

  //如果欲连接的elem比当前elem长 则扩展当前elem ,上下加上都是&#39; &#39;的elem
  def heighten(h: Int): Element = {
    if (h &amp;lt;= height) this
    else {
      val top = elem(&#39; &#39;, width, (h - height) / 2)
      val bottom = elem(&#39; &#39;, width, h - height - top.height)
      top above this above bottom
    }
  }

  //竖向连接 ,判断宽度是否一致 ,是否需要横向扩展
  def above(that: Element): Element = {
    val this1 = this widen that.width
    val that1 = that widen this.width
    elem(this1.contents ++ that1.contents)
  }

  //横向连接 ,判断高度是否一致 ,是否需要上下扩展
  def beside(that: Element): Element = {
    val this1 = this heighten that.height
    val that1 = that heighten this.height
    elem(for ((line1, line2) &amp;lt;- this1.contents zip that1.contents)
    //yield 是将后面的变量保存到集合中 ,在for循环结束时作为返回值返回
      yield line1 + line2
    )
  }

  //final定义不可以重载/派生子类
  final def author: String = &quot;Andong&quot;

}

class ArrayElement(conts: Array[String]) extends Element {


  //对父类的抽象函数进行实现
  override def contents: Array[String] = conts

  //scala 成员函数和成员变量同级别 并且不可同名 同名时会自动覆盖(重载)
  //val contents: Array[String] = conts
  override def width: Int = if (height == 0) 0 else conts.sortWith(_.length &gt; _.length)(0).length

}

//还可以放置在定义时
//class ArrayElement2(val contents: Array[String]) extends Element {
//}

//继承 参数可传递 可重载(同名必须添加override标识)
class LineElement(s: String) extends ArrayElement(Array(s)) {
  override def width = s.length

  override def height = 1
}

//重载放在定义时 并且增加一个变量
class UniformElement(ch: Char,
                     override val width: Int,
                     override val height: Int) extends Element {

  private val line = ch.toString * width

  def contents = Array.fill(height)(line) //用后面的数值填充Array
}

//定义工厂
object ElementFactory {
  def elem(contents: Array[String]): Element =
    new ArrayElement(contents)

  def elem(chr: Char, width: Int, height: Int): Element =
    new UniformElement(chr, width, height)

  def elem(line: String): Element =
    new LineElement(line)
}

object ElementDev {
  def main(args: Array[String]): Unit = {

    val elements = new ArrayBuffer[Element]()
    //多态
    //elements += ElementFactory.elem(Array(&quot;i&#39;m the first&quot;, &quot;Array Element&quot;))
    //elements += ElementFactory.elem(&quot;i just have one line&quot;)
    //elements += ElementFactory.elem(&#39;c&#39;, 4, 3)
    elements += ElementFactory.elem(&#39;*&#39;, 4, 5) above ElementFactory.elem(&quot;Above LineElem&quot;)
    elements += ElementFactory.elem(Array(&quot;Beside&quot;, &quot;ArrayElem&quot;)) beside ElementFactory.elem(&#39;&amp;amp;&#39;, 4, 5)
    //动态绑定 调用
    elements.foreach(e =&gt; {
      e.show
      println()
    })
  }
}

object Spiral {

  import ElementFactory.elem

  //空格
  val space = elem(&quot; &quot;)
  //拐角
  val corner = elem(&quot;+&quot;)

  //打印函数 nEdgers表示拐角次数 direction表示初始方向(0向下 )
  def spiral(nEdges: Int, direction: Int): Element = {
    if (nEdges == 1) {
      corner //只有一个拐角 起始点
    }
    else {
      //递归打印前一条边 顺时针进行 逆时针回溯到上一个方向
      val sp = spiral(nEdges - 1, (direction + 3) % 4)
      //构造竖线
      def verticalBar = elem(&#39;|&#39;, 1, sp.height)
      //构造横线
      def horizontalBar = elem(&#39;-&#39;, sp.width, 1)

      //默认顺时针进行
      val temp = {
        if (direction == 0)
        //向左 -&gt; (转角+ 连接 横边-) 盖住 (原图形 连接 空格 )
          (corner beside horizontalBar) above (sp beside space)
        else if (direction == 1)
        //向下 -&gt; (原图形 盖住 空格 ) 连接 (转角+ 盖住 竖边|)
          (sp above space) beside (corner above verticalBar)
        else if (direction == 2)
        //向右 -&gt; (空格 连接 原图形)盖住 (横边- 连接 转角+)
          (space beside sp) above (horizontalBar beside corner)
        else
        //向上 -&gt; (竖边| 盖住 转角+) 连接 (空格 盖住 原图形)
          (verticalBar above corner) beside (space above sp)
      }
      println(nEdges + &quot;  &quot; + direction)
      temp.show
      temp
    }
  }

  def main(args: Array[String]): Unit = {
    spiral(11, 0)
  }
}
</code></pre>
        
        <br />
        <div id="comment-container">
        </div>
        <div id="disqus_thread"></div>

        <div id="lv-container">
        </div>

    </div>
</div>
    </div>
</div>


<footer class="footer">
    <ul class="list-inline text-center">
        
        

        

        

        

        

    </ul>
    
    <p>
        <span id="busuanzi_container_site_pv">
            <span id="busuanzi_value_site_pv"></span> PV
        </span>
        <span id="busuanzi_container_site_uv">
            <span id="busuanzi_value_site_uv"></span> UV
        </span>
        Created By <a href="https://hexo.io/">Hexo</a>  Theme <a href="https://github.com/aircloud/hexo-theme-aircloud">AirCloud</a></p>
</footer>




</body>

<script>
    // We expose some of the variables needed by the front end
    window.hexo_search_path = ""
    window.hexo_root = "/"
    window.isPost = true
</script>
<script src="https://cdn.bootcss.com/jquery/3.3.1/jquery.min.js"></script>
<script src="/js/index.js"></script>
<script async src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>




</html>
